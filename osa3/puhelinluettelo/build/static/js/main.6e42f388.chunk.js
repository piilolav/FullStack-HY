(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{44:function(e,n,t){},45:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),c=t(19),o=t.n(c),u=t(10),s=t(4),i=t(0),l=function(e){var n=e.name,t=e.deletePerson;return Object(i.jsxs)("p",{children:[" ",n.name," ",n.number," ",Object(i.jsx)("button",{onClick:function(){return t(n.id)},children:"delete"})]})},d=function(e){var n=e.persons,t=e.allPersons,r=e.deletePerson;return n.length>0?Object(i.jsx)("ul",{children:n.map((function(e,n){return Object(i.jsx)(l,{name:e,deletePerson:r},n)}))}):Object(i.jsx)("ul",{children:t.map((function(e,n){return Object(i.jsx)(l,{name:e,deletePerson:r},n)}))})},f=function(e){var n=e.value,t=e.onChange;return Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{value:n,onChange:t})]})},b=function(e){var n=e.onSubmit,t=e.newName,r=e.handleNameChange,a=e.newNumber,c=e.handleNumberChange;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:t,onChange:r})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:a,onChange:c})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},j=t(3),h=t.n(j),m=t(5),p=t(6),O=t.n(p),v="/api/persons",x=function(){var e=Object(m.a)(h.a.mark((function e(){var n,t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.a.get(v),e.next=3,n;case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(m.a)(h.a.mark((function e(n){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.a.post(v,n),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),w=function(){var e=Object(m.a)(h.a.mark((function e(n,t){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=O.a.put("".concat(v,"/").concat(n),t),e.next=3,r;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(h.a.mark((function e(n){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.a.delete("".concat(v,"/").concat(n)),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),C={getAll:x,create:g,update:w,remove:k},N=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{className:"notification",children:n})},S=(t(44),function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),o=Object(s.a)(c,2),l=o[0],j=o[1],h=Object(r.useState)(""),m=Object(s.a)(h,2),p=m[0],O=m[1],v=Object(r.useState)(""),x=Object(s.a)(v,2),g=x[0],w=x[1],k=Object(r.useState)([]),S=Object(s.a)(k,2),y=S[0],P=S[1],T=Object(r.useState)(null),E=Object(s.a)(T,2),A=E[0],D=E[1];Object(r.useEffect)((function(){console.log("effect"),C.getAll().then((function(e){console.log("promise fulfilled"),a(e)}))}),[]),console.log("render",t.length,"persons");return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook "}),Object(i.jsx)(N,{message:A}),Object(i.jsx)(f,{value:g,onChange:function(e){w(e.target.value);var n=new RegExp(g,"i");P((function(){return t.filter((function(e){return e.name.match(n)}))}))}}),Object(i.jsx)("h2",{children:"Add a new"}),Object(i.jsx)(b,{onSubmit:function(e){if(e.preventDefault(),s=l,t.some((function(e){return e.name===s})))if(window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?"))){var n=t.filter((function(e){return e.name===l})),r=n[0].id,c=Object(u.a)(Object(u.a)({},n[0]),{},{number:p});C.update(r,c).then((function(e){a(t.map((function(n){return n.id!==r?n:e})))})).catch((function(e){D("The person ".concat(n[0].name," was already deleted from the server")),setTimeout((function(){D(null)}),5e3)})),j(""),O(""),D("".concat(n[0].name," phonenumber was changed.")),setTimeout((function(){D(null)}),3e3)}else console.log("".concat(l,"'s contact information was not changed."));else{var o={name:l,number:p};C.create(o).then((function(e){a(t.concat(e)),j(""),O(""),D("".concat(o.name," was added to phonebook")),setTimeout((function(){D(null)}),3e3)})).catch((function(e){D("Error: ".concat(e.response.data.error)),setTimeout((function(){D(null)}),3e3),console.log(e.response.data)}))}var s},newName:l,handleNameChange:function(e){j(e.target.value)},newNumber:p,handleNumberChange:function(e){O(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)("ul",{children:Object(i.jsx)(d,{persons:y,allPersons:t,deletePerson:function(e){var n=t.filter((function(n){return n.id===e})),r=n[0].name,c=n[0].id;return console.log(r,c),window.confirm("Do you want to delete ".concat(r,"?"))&&(C.remove(c),console.log("Person ".concat(r," removed")),D("".concat(r," was removed from phonebook")),setTimeout((function(){D(null)}),3e3),a(t.filter((function(e){return e.id!==c})))),!0}})})]})});o.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(S,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.6e42f388.chunk.js.map